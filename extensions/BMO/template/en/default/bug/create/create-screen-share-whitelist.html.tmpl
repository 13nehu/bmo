[%# This Source Code Form is subject to the terms of the Mozilla Public
  # License, v. 2.0. If a copy of the MPL was not distributed with this
  # file, You can obtain one at http://mozilla.org/MPL/2.0/.
  #
  # This Source Code Form is "Incompatible With Secondary Licenses", as
  # defined by the Mozilla Public License, v. 2.0.
  #%]

[% PROCESS global/variables.none.tmpl %]

[% inline_style = BLOCK %]
#whitelist_form {
  padding: 10px;
}
#whitelist_form .required:after {
  content: " *";
  color: red;
}
#whitelist_form .field_label {
  font-weight: bold;
}
#whitelist_form .field_desc {
  padding-bottom: 3px;
}
#whitelist_form .field_desc,
#whitelist_form .head_desc {
  width: 600px;
  word-wrap: normal;
}
#whitelist_form .head_desc {
  padding-top: 5px;
  padding-bottom: 12px;
}
#whitelist_form .form_section {
  margin-bottom: 10px;
}
#whitelist_form textarea {
  font-family: inherit;
  font-size: inherit;
}
#whitelist_form #comp_description {
  test-align: left;
  color: green;
  padding-left: 1em;
}
[% END %]
[% inline_javascript = BLOCK %]
function validateAndSubmit() {
  var alert_text = '';
  var required_fields = {
    vendor: "Please enter a vendor name.",
    contact: "Please enter a point of contact.",
    site_urls: "Please enter site urls for adding to whitelist.",
    notice: "Please enter a notice provided to users.",
    share_information: "Please enter a description of information being shared.",
    specific_content: "Please select whether specific content is transmitted.",
    directed_content: "Please select whether user directed content is transmitted.",
    compliance: "Please select whether the usage complies with guidelines.",
  };
  for (var field in required_fields) {
    if (!fieldValue(field))
      alert_text += required_fields[field] + "\n";
  }
  if (alert_text != '') {
    alert(alert_text);
    return false;
  }
  document.getElementById('short_desc').value = fieldValue('vendor');
  return true;
}
function fieldValue(elem_id) {
    var el = document.getElementById(elem_id);
    if (!el) return false;
    if (el.type == 'text' || el.type == 'textarea') {
      return el.value;
    }
    return el.options[el.selectedIndex].value;
}
[% END %]

[% PROCESS global/header.html.tmpl
   title = "Firefox Screen Sharing Whitelisti Submission"
   style = inline_style
   javascript = inline_javascript
   javascript_urls = [ 'extensions/BMO/web/js/form_validate.js' ]
%]

<h2>Firefox Screen Sharing Whitelist Submission</h2>

<h3>Description</h3>

<div class="head_desc">
  Please supply the following information for a new screen sharing
  whitelist requests
</div>

<form id="whitelist_form" method="post" action="post_bug.cgi" enctype="multipart/form-data"
      onSubmit="return validateAndSubmit();">
  <input type="hidden" name="format" value="screen-share-whitelist">
  <input type="hidden" name="product" value="Firefox">
  <input type="hidden" name="component" value="Screen Sharing Whitelist">
  <input type="hidden" name="rep_platform" value="All">
  <input type="hidden" name="op_sys" value="Other">
  <input type="hidden" name="version" value="Trunk">
  <input type="hidden" name="bug_severity" id="bug_severity" value="normal">
  <input type="hidden" name="priority" value="--">
  <input type="hidden" name="short_desc" id="short_desc" value="">
  <input type="hidden" name="token" value="[% token FILTER html %]">

<div class="form_section">
  <label for="vendor" class="field_label required">Vendor name</label>
  <br>
  <input type="text" name="vendor" id="vendor" size="80">
</div>

<div class="form_section">
  <label for="contact" class="field_label required">Point of contact</label>
  <br>
  <input type="text" name="contact" id="contact" size="80">
</div>

<div class="form_section">
  <label for="site_urls" class="field_label required">Site URLs</label>
  <div class="field_desc">
    Site URLs requesting addition to the Whitelist for screen sharing.
  </div>
  <textarea name="site_urls" id="site_urls" cols="80" rows="10"></textarea>
</div>

<h3>Access Resquest Details</h3>

<div class="head_desc">
  Please answer the questions below and freely ask for any clarification
  needed. please provide requested information.
</div>

<div class="form_section">
  <label for="notice" class="field_label required">
    Does the application provide users with notice and control?
  </label>
  <div class="field_desc">
   Please paste or attach notice.
  </div>
  <textarea name="notice" id="notice" cols="80" rows="10"></textarea>
</div>

<div class="form_section">
  <label for="share_information" class="field_label required">
    Does it describe to users clearly and accessibly how the screensharing
    application handles and shares information in connection with the
    screenshare stream?
  </label>
  <div class="field_desc">
    Please paste or attach description.
  </div>
  <textarea name="share_information" id="share_information" cols="80" rows="10"></textarea>
</div>

<div class="form_section">
  <label for="specific_content" class="field_label required">
    Does it transmit only the specific content that the user directs to be
    transmitted?
  </label>
  <br>
  <select name="specific_content" id="specific_content">
    <option value="">Select</option>
    <option value="Yes">Yes</option>
    <option value="No">No</option>
  </select>
</div>

<div class="form_section">
  <label for="directed_content" class="field_label required">
    Does it transmit User Directed Content only to the userâ€™s intended
    recipients?
  </label>
  <br>
  <select name="directed_content" id="directed_content">
    <option value="">Select</option>
    <option value="Yes">Yes</option>
    <option value="No">No</option>
  </select>
</div>

<div class="form_section">
  <label for="compliance" class="field_label required">
    Does the usage comply with all the guidelines under the Developer
    Submission Policy regarding not harming the user or Mozilla?
  </label>
  <div class="field_desc">
    More information at <a href="https://wiki.mozilla.org/Screensharing">
    https://wiki.mozilla.org/Screensharing</a>.
  </div>
  <select name="compliance" id="compliance">
    <option value="">Select</option>
    <option value="Yes">Yes</option>
    <option value="No">No</option>
  </select>
</div>

<input type="submit" id="commit" value="Submit">

<p>
  [ <span class="required_star">*</span> <span class="required_explanation">Required Field</span> ]
</p>

</form>

[% PROCESS global/footer.html.tmpl %]
