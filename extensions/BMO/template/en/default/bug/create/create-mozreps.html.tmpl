[%# The contents of this file are subject to the Mozilla Public
  # License Version 1.1 (the "License"); you may not use this file
  # except in compliance with the License. You may obtain a copy of
  # the License at http://www.mozilla.org/MPL/
  #
  # Software distributed under the License is distributed on an "AS
  # IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or
  # implied. See the License for the specific language governing
  # rights and limitations under the License.
  #
  # The Original Code is the BMO Bugzilla Extension.
  #
  # The Initial Developer of the Original Code is the Mozilla Foundation
  # Portions created by the Initial Developers are Copyright (C) 2011 the
  # Initial Developer. All Rights Reserved.
  #
  # Contributor(s): Byron Jones <glob@mozilla.com>
  #%]

[% PROCESS global/variables.none.tmpl %]

[% PROCESS global/header.html.tmpl
   title = "Mozilla Reps - Application Form"

%]

<style>

#reps-form {
  width: 600px;
  border-spacing: 0px;
  border: 4px solid #e0e0e0;
}

#reps-form th, #reps-form td {
  padding: 5px;
}

#reps-form .even th, #reps-form .even td {
  background: #e0e0e0;
}

#reps-form th {
  text-align: left;
}

#reps-form textarea {
  font-family: Verdana, sans-serif;
  font-size: small;
  width: 590px;
}

#reps-form .mandatory {
  color: red;
  font-size: 80%;
}

#reps-form .missing {
  box-shadow: #FF0000 0 0 1.5px 1px;
}

</style>

[% USE Bugzilla %]
[% mandatory = '<span class="mandatory">*</span>' %]

<script>
var Dom = YAHOO.util.Dom;

function mandatory(ids) {
  result = true;
  for (i in ids) {
    id = ids[i];
    el = Dom.get(id);

    if (el.type.toString() == "checkbox") {
      value = el.checked;
    } else {
      value = el.value.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
      el.value = value;
    }

    if (value == '') {
      Dom.addClass(id, 'missing');
      result = false;
    } else {
      Dom.removeClass(id, 'missing');
    }
  }
  return result;
}

function submitForm() {
  if (!mandatory([ 'first_name', 'last_name', 'age', 'sex', 'city', 'country',
                   'email', 'languages', 'learn', 'motivation', 'privacy' ])
  ) {
    alert('Please enter all the required mandatory fields.');
    return false;
  }

  Dom.get('short_desc').value =
    "Application Form: " + Dom.get('first_name').value + ' ' + Dom.get('last_name').value;

  comment =
    "First Name:\n" +
    Dom.get('first_name').value + "\n\n" +
    "Last Name:\n" +
    Dom.get('last_name').value + "\n\n" +
    "Age:\n" +
    Dom.get('age').value + "\n\n" +
    "Sex:\n" +
    Dom.get('sex').value + "\n\n" +
    "City:\n" +
    Dom.get('city').value + "\n\n" +
    "Country:\n" +
    Dom.get('country').value + "\n\n" +
    "Local Community:\n" +
    Dom.get('community').value + "\n\n" +
    "IM:\n" +
    Dom.get('im').value + "\n\n" +
    "Existing Mozilla Contributor:\n" +
    (Dom.get('existing').checked ? 'yes' : 'no') + "\n\n" +
    "Languages Spoken:\n" +
    Dom.get('languages').value + "\n\n" +
    "How did you learn about Mozilla Reps:\n" +
    Dom.get('learn').value + "\n\n" +
    "What motivates you most about joining Mozilla Reps:\n" +
    Dom.get('motivation').value + "\n\n" +
    "Comments:\n" +
    Dom.get('comments').value + "\n"
  ;
  Dom.get('comment').value = comment;

  return true;
}

</script>

<noscript>
<h1>Javascript is required to use this form.</h1>
</noscript>

<h1>Mozilla Reps - Application Form</h1>

<form method="post" action="post_bug.cgi" id="tmRequestForm">
<input type="hidden" name="product" value="Mozilla Reps">
<input type="hidden" name="component" value="Mentorship">
<input type="hidden" name="bug_severity" value="normal">
<input type="hidden" name="rep_platform" value="All">
<input type="hidden" name="priority" value="--">
<input type="hidden" name="op_sys" value="Other">
<input type="hidden" name="version" value="unspecified">
<input type="hidden" name="groups" value="mozilla-reps">

<input type="hidden" name="short_desc" id="short_desc" value="">
<input type="hidden" name="comment" id="comment" value="">

<table id="reps-form">

<tr class="odd">
  <th>First Name:[% mandatory %]</th>
  <td><input id="first_name" size="40"></td>
</tr>

<tr class="even">
  <th>Last Name:[% mandatory %]</th>
  <td><input id="last_name" size="40"></td>
</tr>

<tr class="odd">
  <th>Age:[% mandatory %]</th>
  <td><input id="age" size="40"></td>
</tr>

<tr class="even">
  <th>Sex:[% mandatory %]</th>
  <td>
    <select id="sex">
      <option>Male</option>
      <option>Female</option>
      <option>Other</option>
    </select>
  </td>
</tr>

<tr class="odd">
  <th>City:[% mandatory %]</th>
  <td><input id="city" size="40"></td>
</tr>

<tr class="even">
  <th>Country:[% mandatory %]</th>
  <td><input id="country" size="40"></td>
</tr>

<tr class="odd">
  <th>Local Community you participate in:</th>
  <td><input id="community" size="40"></td>
</tr>

<tr class="even">
  <th>Email:[% mandatory %]</th>
  <td><input id="email" size="40"></td>
</tr>

<tr class="odd">
  <th>IM (specifty service):</th>
  <td><input id="im" size="40"></td>
</tr>

<tr class="even">
  <th>Already Mozilla contributor?</th>
  <td><input id="existing" type="checkbox"></td>
</tr>

<tr class="odd">
  <th>Languages Spoken:[% mandatory %]</th>
  <td><input id="languages" size="40"></td>
</tr>

<tr class="even">
  <th>How did you learn about Mozilla Reps?[% mandatory %]</th>
  <td><input id="learn" size="40"></td>
</tr>

<tr class="odd">
  <th colspan="2">What motivates you most about joining Mozilla Reps?[% mandatory %]</th>
</tr>
<tr class="odd">
  <td colspan="2"><textarea id="motivation"></textarea></td>
</tr>

<tr class="even">
  <th colspan="2">Comments:</th>
</tr>
<tr class="even">
  <td colspan="2"><textarea id="comments"></textarea></td>
</tr>

<tr class="odd">
  <th>
    I have read the
    <a href="http://www.mozilla.com/en-US/privacy-policy" target="_blank">Mozilla Privacy Policy</a>:[% mandatory %]
  </th>
  <td><input id="privacy" type="checkbox"></td>
</tr>

<tr>
  <td>&nbsp;</td>
  <td align="right"><input type="submit" value="Submit" onclick="return submitForm()"></td>
</tr>

</table>

</form>

<p>Thanks for contacting us.
   You will be notified by email of any progress made in resolving your
   request.
</p>

[% PROCESS global/footer.html.tmpl %]
